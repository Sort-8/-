<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<script src="js/cos-js-sdk-v5.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/jquery-3.5.1.js" type="text/javascript" charset="utf-8"></script>
	</head>
	
	<body>
		<input id="fileSelector" type="file" name="filename">
		<input id="submitBtn" type="button" onclick="test()" value="提交">
		<img src="" id="img0" class="img-thumbnail"> 
	</body>
	<script type="text/javascript">
	 var selectedFile;	
	 var filename;
	 $("#fileSelector").change(function(){  
	 	     selectedFile = document.getElementById('fileSelector').files[0];
	 	     filename = selectedFile.name;
		});  
	 function test(){
		var min = 100;
		var max = 999;
		var num = parseInt(Math.random()*(max-min+1)+min,10);
		var time = new Date().getTime();
		var fileType = filename.toString().substring(filename.lastIndexOf("."));
		console.log(fileType);
		var fileName = time.toString().substring(time.toString.length-3) + num + fileType;
		var cos = new COS({
	     SecretId: 'AKIDhEUTCeqlQntiHZaKnzumPowmMgkX2HFw',
         SecretKey: 'RaU7TYNwHL8etrYz92ez3rOedLlumOjn',
		 })
			cos.putObject({
		    Bucket: 'library-management-1305004688',  
		    Region: 'ap-guangzhou',     
		    Key: fileName,
		    StorageClass: 'STANDARD',
		    Body: selectedFile, // 上传文件对象
		    onProgress: function(progressData) {
		        console.log(JSON.stringify(progressData));
		    }
		}, function(err, data) {
		    console.log(err || data);
		    console.log(data.Location);//可以拿到文件地址
		});	
	 }
	</script>
</html>